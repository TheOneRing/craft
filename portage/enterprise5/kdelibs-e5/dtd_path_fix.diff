diff -Nru kdelibs-4.8.0.orig/kdoctools/CMakeLists.txt kdelibs-4.8.0/kdoctools/CMakeLists.txt
--- kdelibs-4.8.0.orig/kdoctools/CMakeLists.txt	2011-10-11 16:41:54.000000000 +0200
+++ kdelibs-4.8.0/kdoctools/CMakeLists.txt	2012-02-22 12:27:36.049576500 +0100
@@ -28,8 +28,18 @@
 
 set (_custom_dtd_kdex "customization/dtd/kdex.dtd")
 configure_file(${_custom_dtd_kdex}.cmake ${CMAKE_CURRENT_BINARY_DIR}/${_custom_dtd_kdex} )
-install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${_custom_dtd_kdex}
-        DESTINATION ${DATA_INSTALL_DIR}/ksgmltools2/customization/dtd )
+# WARNING: this is due to severe limitations on the windows platform to keep the dtd relocateable
+# see the .xsl.cmake files for a more verbose explanation below
+if(NOT WIN32)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${_custom_dtd_kdex}
+            DESTINATION ${DATA_INSTALL_DIR}/ksgmltools2/customization/dtd )
+else(NOT WIN32)
+    install(CODE
+ "FILE(RELATIVE_PATH DOCBOOKXML_CURRENTDTD_DIR \${CMAKE_INSTALL_PREFIX}/${DATA_INSTALL_DIR}/ksgmltools2/customization/dtd ${DOCBOOKXML_CURRENTDTD_DIR})
+  CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/${_custom_dtd_kdex}.cmake ${CMAKE_CURRENT_BINARY_DIR}/${_custom_dtd_kdex}.install)")
+    get_filename_component(_custom_dtd_kdex_name ${_custom_dtd_kdex} NAME)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${_custom_dtd_kdex}.install DESTINATION ${DATA_INSTALL_DIR}/ksgmltools2/customization/dtd RENAME ${_custom_Dtd_kdex_name})
+endif(NOT WIN32)
 
 configure_file(config-kdoctools.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/config-kdoctools.h )
 
@@ -127,6 +137,11 @@
 
 
 ########### customize includes for xslt ###############
+# WARNING: this has severe limitations on the windows platform since the .xsl
+# & docbook files need to be relocatable. We cannot just replace the paths in
+# the .xsl with relative paths because these files are not installed while
+# building kdelibs. Instead, we will reconfigure those files at install time
+# with relative paths.
 
 file( GLOB _kdeincludexslt_ALL "customization/kde-include*.xsl.cmake" )
 foreach( _kdeincludexslt ${_kdeincludexslt_ALL} )
@@ -134,8 +149,15 @@
     string( REGEX REPLACE ".cmake$" "" _kdeincludexslt_out "${_kdeincludexslt_name}" )
     set( _kdeincludexslt_binarypath "${CMAKE_CURRENT_BINARY_DIR}/customization/${_kdeincludexslt_out}" )
     configure_file( ${_kdeincludexslt} ${_kdeincludexslt_binarypath} )
-    install(FILES ${_kdeincludexslt_binarypath}
-            DESTINATION ${DATA_INSTALL_DIR}/ksgmltools2/customization )
+    if(NOT WIN32)
+        install(FILES ${_kdeincludexslt_binarypath}
+                DESTINATION ${DATA_INSTALL_DIR}/ksgmltools2/customization )
+    else(NOT WIN32)
+        install(CODE 
+ "FILE(RELATIVE_PATH DOCBOOKXSL_DIR \${CMAKE_INSTALL_PREFIX}/${DATA_INSTALL_DIR}/ksgmltools2/customization ${DOCBOOKXSL_DIR})
+  CONFIGURE_FILE( ${_kdeincludexslt} ${_kdeincludexslt_binarypath}.install )")
+        install(FILES ${_kdeincludexslt_binarypath}.install DESTINATION ${DATA_INSTALL_DIR}/ksgmltools2/customization RENAME ${_kdeincludexslt_out})
+    endif(NOT WIN32)
 endforeach( _kdeincludexslt ${_kdeincludexslt_ALL} )
 
 
